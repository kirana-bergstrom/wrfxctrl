<!doctype html>
<title>WRFx - simulation overview</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.6/semantic.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/components/checkbox.min.css"/>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js"></script>
<script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/components/checkbox.min.js"></script>
<script src="{{ url_for('static', filename='jquery.tablesort.min.js') }}"></script>
<body>



<div class="ui one column stackable center aligned page grid">
  <div class="column sixteen wide">
    <form class="ui form" method="POST">
    <h1>List of fire simulations</h1>
      <br />
      <table class="ui celled sortable table" id="sim-table">
        <thead>
          <tr>
            <th class="no-sort"><div class="ui checkbox"><input type="checkbox" name="_all" id="cb-all" onClick="EnableRemove(this)"><label></label></div> </th>
            <th>Simulation identifier</th>
            <th>Status</th>
            <th id="sim-started-at">Started at</th>
            <th>Description</th>
            <th>Visualization</th>
          </tr>
        </thead>
        <tbody>
          {% for sim_id,sim in simulations.iteritems() %}
          <tr>
            <td> <div class="ui checkbox"> <input type="checkbox" class="jobcb" name="{{sim_id}}"><label></label></div> </td>
            <td> <a href="/monitor/{{sim_id}}" target="_blank"> {{sim_id}} </a></td>
            <td> {{sim['state']['wrf'] | safe}} </td>
            <td> {{sim['started_at']}}  </td>
            <td> {{sim['description']}} </td>
            <td> {% if sim['state']['output'] == 'available' %}
                   <a href="{{sim['visualization_link']}}" target="_blank">visualization</a>
                 {% else %}
                   no visualization
                 {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
     </table>
     <div class="ui left floated red button disabled" type="submit" id="RemoveButton">Remove</div>
     <a href="{{ urls['welcome'] }}" class="ui right floated blue button">Home</a>
     <a href="{{ urls['submit'] }}" class="ui right floated red button"><i class="fire icon"></i>Start a new fire</a>
      <p id="acknowledgement"><a href="http://www.openwfm.org" target="_blank">University of Colorado Denver, Wildland Fire Group 2016</a></p>
   </div>
</div>

<script type="text/javascript">
$(document).ready( function() {
    var sdata = $('table').tablesort().data('tablesort');
    sdata.sort($('#sim-started-at'), 'desc');
});

EnableRemove = function(boxval) 
{
        if (boxval.checked == true)
        {       $("#RemoveButton").removeClass('disabled');
        }
        else
        {       $("#RemoveButton").addClass('disabled');
        }
}       
</script>

</body>
